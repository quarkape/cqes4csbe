# 综合素质评价管理系统（cqes4cs） API接口文档

# 1 API接口说明

## 1.1 基础说明

- 接口基准地址：`http://localhost:8001/`
- 服务器端已支持CORS跨域支持
- api统一使用`Token`认证
- 需要根据角色授权的api，必须在请求头中使用 `authToken` 字段提供 `authToken` 令牌
- 使用`HTTP Status Code`标识状态
- 数据返回格式统一使用`JSON`
- 部分接口在很多页面都会用到

## 1.2 全局处理

- 请求方式统一为`POST`
- 使用`addResourceHandler`做静态资源映射

## 1.3 支持的请求方法

- GET（SELECT）：从服务器中取出资源（一项或者多项）。

- POST（CREATE）：在服务器中新建一个资源。

## 1.4 通用返回状态码说明

| 状态码 | 含义 | 说明 |
| -------- | --------------------- | --------------------------------------------------- |
|   200     |   OK   | 请求成功 |
| 400 | BAD REQUEST | 请求得地址包含不支持的参数 |
| 401 | UNAUTHORIZED | 用户不存在 |
| 402 | SESSION EXPIRED | 会话过期 |
| 403 | FORBIDDEN | 密码错误、请求没有携带token |
| 404 | NOT FOUND | 请求的资源不存在 |
| 500 | INTERNAL SERVER ERROR | 服务器内部错误 |
| 601 | REQUIRE PERMISSON | 当前用户角色不具备访问权限 |
| 602 | SESSIONID EXPIRED | 手动重启服务器导致用户会话过期，需要用户重新登录 |

## 1.5 统一响应体格式

- 响应参数：

  | 参数名  | 说明                                                         | 是否可以为空 |
  | ------- | ------------------------------------------------------------ | ------------ |
  | code    | 请求结果编码，用0，1，2，3...表示。一般0表示请求处理正常，其他单个数字表示有异常 | 否           |
  | message | 请求结果信息                                                 | 否           |
  | data    | 请求结果，如果没有的话则为null                               | 是           |

- 响应数据：

  ~~~json
  // 有数据时
  {
      "code": 0,
      "message": "success",
      "data": [
          {
              "score": 4.5,
          }
      ]
  }
  // 无数据时
  {
      "code": 0,
      "message": "success",
      "data": []
  }
  ~~~


# 2 登录与登出

## 2.1 登陆验证

- 请求路径：`/checkLogin`
- 请求参数：

| 参数名 | 参数说明 | 是否必填 |
| - | - | - |
| serviceId | 登录令牌，包含了用户名、密码和时间戳，需要用base64解码 | 是 |

​	serviceId是由三个字符串拼接后用base64编码得到的字符串。包含了三个部分：username、password和timestamp，需要用base64解码：

| 参数      | 长度限制   | 说明                       |
| --------- | ---------- | -------------------------- |
| username  | 20字符以内 | 用户id。一般为学号或者工号 |
| password  | 50字符以内 | 用户密码                   |
| timestamp |            | 时间戳                     |

- 响应参数

| 参数名 | 参数说明 | 备注 |
| - | - | - |
| token | 登录成功后的令牌 | 登录后的所有请求都需要携带上这个参数，否则无法访问 |
| role | 用户所属角色 | 登录成功后会根据角色跳转到不同系统页面 |
| authToekn | 用户角色授权令牌 | 某些API需要验证用户角色，需要携带上这个参数 |

- 响应数据

~~~json
"data": {
    "role": "system",
    "authToken": "ebf75a41-73de-416a-8e5a-0a9039f7e151",
    "token": "9ff7cca2-11ae-4179-b590-3e8e8436e5a3"
}
~~~

## 2.2 登出

- 请求路径：/logOut
- 请求参数：无
- 相应参数：无



## 2.3 查询通知列表

- 请求地址：`/getAllNotifys`

- 接口说明：管理员端系统没有这一接口。

- 请求参数：无

- 响应参数：

  | 参数名 | 说明                             |
  | ------ | -------------------------------- |
  | id     | 通知id                           |
  | detail | 通知详细信息                     |
  | state  | 通知状态。0表示未读，1表示已读。 |
  | title  | 通知标题                         |

- 响应数据：

  ~~~JSON
  "data": [
      {
          "id": "166856853680551214108037",
          "detail": "同学您好，您提交的关于【创新创业竞赛】的异议被驳回，理由是【该赛事不参与加分】。如果您还需要继续提出异议，请直接联系老师。",
          "state": 0,
          "title": "学分申请异议申请驳回通知"
      }
  ]
  ~~~



## 2.4 标记通知已读

- 请求地址：`/readNotify`

- 接口说明：管理员端没有该接口。调用位置为通知-标记已读。

- 请求参数：

  | 参数名 | 说明   |
  | ------ | ------ |
  | id     | 通知id |

- 响应参数：无

- 响应数据：无



## 2.5 标记所有通知已读
- 请求地址：`/readNotify`

- 接口说明：管理员端没有该接口。调用位置为通知-标记已读。

- 请求参数：

  | 参数名 | 说明   |
  | ------ | ------ |
  | id     | 通知id |

- 响应参数：无

- 响应数据：无

  

## 2.5 删除通知

- 请求地址：`/deleteOneNotify`

- 接口说明：管理员端没有该接口。调用位置为通知-删除此条。

- 请求参数：

  | 参数名 | 说明   |
  | ------ | ------ |
  | id     | 通知id |

- 响应参数：无

- 响应数据：无

  

## 2.5 删除所有通知

- 请求地址：`/deleteAllNotify`

- 接口说明：管理员端没有该接口。调用位置为通知-删除全部通知。

- 请求参数：无

- 响应参数：无

- 响应数据：无


# 3 学生端

## 3.1 首页

## 3.2 学分评价

### 3.2.1 查询综评成绩

- 请求地址：`/getFinalGradeById`

- 接口说明：调用位置为学分评价-综合得分。该接口需要学生角色权限。该接口只查询简单的成绩

- 请求参数：

  | 参数名 | 说明                         |
  | ------ | ---------------------------- |
  | year   | 需要查询的综评成绩对应的年份 |

- 响应参数：

  | 参数名      | 说明         |
  | ----------- | ------------ |
  | score_plus  | 手动加分数值 |
  | score_main  | 学业成绩     |
  | score_sub   | 手动扣分数值 |
  | score_other | 其他加分数值 |
  | id          | 学生id       |
  | score_final | 综评总成绩   |

- 响应数据：

  ~~~json
  "data": {
      "score_plus": 4.5,
      "score_main": 17.2933,
      "score_sub": 1.0,
      "score_other": 60.0,
      "id": "51214108037",
      "score_final": 80.7933
  }
  ~~~



### 3.2.2 获取加分申请列表

- 请求地址：`/getAddScoreMaterialDetail`

- 接口说明：需要学生权限。该接口调用位置为学分评价-加分详情。

- 请求参数：

  | 参数名 | 说明                         |
  | ------ | ---------------------------- |
  | year   | 查询的加分申请列表对应的年份 |

- 响应参数：

  | 参数名 | 说明                                     |
  | ------ | ---------------------------------------- |
  | score  | 加分申请的分值                           |
  | name   | 加分申请对应的项目名称                   |
  | action | 加分申请的状态。0表示正常，1表示异议待审 |
  | id     | 加分申请id                               |

- 响应数据：

  ~~~json
  "data": [
      {
          "score": 60.0,
          "name": "创新创业竞赛",
          "action": 0,
          "id": "166032422274551214108037"
      }
  ]
  ~~~




### 3.2.3 提出异议

- 请求地址：`/submitAgainst`

- 接口说明：需要学生角色权限。调用位置为学分评价-加分详情-操作-异议。

- 请求参数：

  | 参数名 | 说明                     |
  | ------ | ------------------------ |
  | id     | 需要提出异议的学分申请id |
  | desc   | 提出异议的理由，限200字  |

- 响应参数：无

- 响应数据：无



## 3.3 评价公示

### 3.3.4 查询专业综评成绩列表

- 请求地址：`/getAllStudentScoreThemselves`

- 接口说明：学生端会用到这个接口。调用位置：评价公示。该接口需要学生角色权限。

- 请求参数：

  | 参数名 | 说明           |
  | ------ | -------------- |
  | year   | 查询对应的年份 |

- 响应参数：

  | 参数名      | 说明                          |
  | ----------- | ----------------------------- |
  | score_plus  | 手动加分分值                  |
  | score_main  | 学业成绩                      |
  | name        | 学生名字                      |
  | score_sub   | 手动扣分分值                  |
  | rank        | 专业排名                      |
  | score_other | 其他加分                      |
  | id          | 学生id                        |
  | score_final | 综测总分，即学业成绩+其他成绩 |

- 响应数据：

  ~~~json
  "data": [
      {
          "score_plus": 4.5,
          "score_main": 17.2933,
          "name": "王浩",
          "score_sub": 1.0,
          "rank": 1.0,
          "score_other": 60.0,
          "id": "51214108037",
          "score_final": 80.7933
      }
  ]
  ~~~



## 3.4 学分管理

### 3.4.1 查询学分申请列表

- 请求路径：`/getStudentAllScoreMaterials`

- 接口说明：单个学生的某一年份的所有学分申请，评价公示-操作-查看加分内容。该接口需要学生角色权限。后面有一个接口功能类似但不完全相同，这个接口只返回审核通过的学分申请。

- 请求参数：

  | 参数名 | 说明             |
  | ------ | ---------------- |
  | id     | 学生id           |
  | year   | 学分申请所属年份 |

- 响应参数

  | 参数名 | 说明                     |
  | ------ | ------------------------ |
  | score  | 学分申请的加分数值       |                                      |
  | imgurl | 学分申请证明材料图片地址，该字段需要结合学分申请材料的网址使用 |
  | name   | 学分申请对应的项目名称   |
  | id     | 学分申请id               |

- 响应数据

  ~~~json
  "data": [
      {
          "score": 60.0,
          "imgurl": "166032422274051214108037.jpg",
          "name": "创新创业竞赛",
          "id": "166032422274551214108037"
      }
  ]
  ~~~



### 3.4.1 关键词查询赛事列表

- 请求地址：`/getContestSearchResultByWords`

- 接口说明：该接口需要学生角色权限。

- 请求参数：

  | 参数名 | 说明       |
  | ------ | ---------- |
  | words  | 赛事关键字 |

- 响应参数：

  | 字段  | 说明     |
  | ----- | -------- |
  | id    | 赛事id   |
  | value | 赛事名称 |

- 响应数据：

  ~~~json
  "data": [
      {
          "id": "1660272616366",
          "value": "计算机设计大赛"
      }
  ]
  ~~~



### 3.4.3 查询[其他]加分规则配置

- 请求地址：`/getContestConfigByUuid`

- 接口说明：需要学生角色权限。调用位置为学分管理-加分申请-其他。该接口的作用是当学生选择某项加分规则后，单独加载这项加分规则的配置数据。

- 请求参数：

  | 参数名 | 说明         |
  | ------ | ------------ |
  | uuid   | 加分规则的id |

- 响应参数：响应内容是一个字符串，该字符串可由JSON.parse()解析为json数据。该json数据存储了某个加分规则的具体加分配置。

- 响应数据：

  ~~~json
  "data": "{\"uuid\":\"2b16b88f-83aa-4d06-98ad-e19a08a83c2a\",\"name\":\"常见的专业赛事\"}"
  ~~~



### 3.4.4 查询[赛事]加分规则配置

- 请求地址： `/getContestConfigById`
- 接口说明：需要学生角色权限。调用位置为学分管理-加分申请-赛事。该接口的作用是当学生选择某项赛事后，单独加载这项赛事所绑定的加分规则的配置数据。

- 请求参数：

  | 参数名 | 说明     |
  | ------ | -------- |
  | id     | 赛事的id |

- 响应参数：响应内容是一个字符串，该字符串可由JSON.parse()解析为json数据。该json数据存储了某个加分规则的具体加分配置。

- 响应数据：

  ~~~json
  "data": "{\"uuid\":\"2b16b88f-83aa-4d06-98ad-e19a08a83c2a\",\"name\":\"常见的专业赛事\"}"
  ~~~



### 3.4.5 申请学分

- 请求地址：`/createScore`

- 接口说明：需要学生角色权限。调用位置为学分管理-学分申请

- 请求参数：

  | 参数名 | 参数类型            | 说明                   |
  | ------ | ------------------- | ---------------------- |
  | image  | binary              | 学分申请的证明材料图片 |
  | map    | Map<String, String> | 包含学分申请的多个信息 |

  上方的map具体包含以下数据：

  | 参数名   | 说明                   |
  | -------- | ---------------------- |
  | name     | 加分申请项目名称       |
  | levelstr | 保存加分等级的字符串   |
  | ruleid   | 加分申请对应的加分规则 |

- 响应参数：

  | 参数名 | 说明         |
  | ------ | ------------ |
  |        | 学分申请的id |

- 响应数据：

  ~~~json
  "data": "166032422274551214108037"
  ~~~

  

### 3.4.6 查询学分申请列表

- 请求地址：`/getAuthenticationsById`

- 接口说明：需要学生角色权限。调用位置为学分管理-操作-查看。`3.4.1`的接口只查询审核通过的学分申请，并且结果包含分值；此接口查询所有状态的学分申请，且结果不包含分值。

- 请求参数：

  | 参数名   | 说明           |
  | -------- | -------------- |
  | curPage  | 当前查询页序号 |
  | pageSize | 查询一页的数量 |
  | year     | 筛选年份       |

- 响应参数：

  | 参数名 | 说明                                                      |
  | ------ | --------------------------------------------------------- |
  | total  | 筛选条件下的学分申请总数                                  |
  | name   | 学分申请名称                                              |
  | id     | 学分申请id                                                |
  | state  | 学分申请状态。0，1，2分别表示未审核、审核通过和修改通过。 |

- 响应数据：

  ~~~json
  "data": {
      "total": 1,
      "items": [
          {
              "name": "创新创业竞赛",
              "id": "166032422274551214108037",
              "state": 2
          }
      ]
  }
  ~~~



### 3.4.7 查询特定学分申请

- 请求地址：`/getAuthenticationById`

- 接口说明：需要学生角色权限。调用位置为学分管理-操作-查看

- 请求参数：

  | 参数名 | 说明       |
  | ------ | ---------- |
  | id     | 学分申请id |

- 响应参数：

  | 参数名    | 说明                                                    |
  | --------- | ------------------------------------------------------- |
  | imgurl    | 学分申请图片地址                                        |
  | checktime | 学分申请审核时间                                        |
  | year      | 学分申请的年份                                          |
  | name      | 学分申请名称                                            |
  | id        | 学分申请id                                              |
  | state     | 学分申请状态。0、1、2分别表示未审核、审核通过和修改通过 |

- 响应数据：

  ~~~json
  "data": {
      "imgurl": "166032422274051214108037.jpg",
      "checktime": "1660325542662",
      "year": "2022-2023",
      "name": "创新创业竞赛",
      "id": "166032422274551214108037",
      "state": 2
  }
  ~~~




### 3.4.8 撤销尚未审核的学分申请

- 请求地址：`/checkAuthenticationNotPassStudent`

- 接口说明：需要学生角色权限。调用位置为学分管理-操作-撤回。

- 请求参数：

  | 参数名 | 说明       |
  | ------ | ---------- |
  | id     | 学分申请id |

- 响应参数：无

- 响应数据：无



# 4 管理员端

## 4.1 账号管理

### 4.1.1 查询教师账号列表

- 请求地址：`/getManagerList`

- 接口说明：需要管理员角色权限。调用位置：账号管理。

- 请求参数：无

- 响应参数：

  | 参数名 | 说明                 |
  | ------ | -------------------- |
  | role   | 用户角色             |
  | year   | 用户管理的学生的年级 |
  | name   | 用户姓名             |
  | userid | 用户id               |

- 响应数据：

  ~~~json
  "data": [
      {
          "role": "manager",
          "year": "2021",
          "name": "teacher",
          "userid": "0123456"
      }
  ]
  ~~~



### 4.1.2 重置教师账号密码

- 请求地址：`/resetPasswordManager`

- 接口说明：需要管理员角色权限。调用地址为账号管理-操作-

- 请求参数：

  | 参数名 | 说明                   |
  | ------ | ---------------------- |
  | userid | 需要重置密码的教师账号 |

- 响应参数：

  | 参数名 | 说明             |
  | ------ | ---------------- |
  |        | 重置后的随机密码 |

- 响应数据：

  ~~~json
  "data": "nVtuaM"
  ~~~



### 4.1.3 删除教师用户账号

- 请求地址：`/deleteAccountManager`

- 接口说明：需要管理员角色权限。调用位置为账号管理-操作-删除账号

- 请求参数：

  | 参数名 | 说明                   |
  | ------ | ---------------------- |
  | userid | 需要删除的教师账号的id |

- 响应参数：无

- 响应数据：无



### 4.1.4 修改教师管理年级

- 请求地址：`/alterManagerYear`

- 接口说明：需要管理员角色权限。调用位置为账号管理-操作-修改管理年级

- 请求参数：

  | 参数名 | 说明                         |
  | ------ | ---------------------------- |
  | year   | 修改后的教师账号管理年级     |
  | userid | 需要修改管理年级的教师账号id |

- 响应参数：无

- 响应数据：无



### 4.1.5 新增教师用户账号

- 请求地址：`/addManagerAccount`

- 接口说明：需要管理员角色权限。调用位置为账号管理-新增账号

- 请求参数：

  | 参数名   | 说明           |
  | -------- | -------------- |
  | name     | 教师名称       |
  | userid   | 教师账号id     |
  | password | 教师账号密码   |
  | year     | 教师管理的年级 |

- 响应参数：无

- 响应数据：无

# 5 教师端

## 5.1 审核

### 5.1.1 查询学生加分申请列表

- 请求地址：`/getAllAuthentications`

- 接口说明：需要教师角色权限。调用位置为加分审核

- 请求参数：

  | 参数名称 | 说明                                                         |
  | -------- | ------------------------------------------------------------ |
  | curPage  | 当前查询页的序号                                             |
  | pageSize | 查询一页的数量                                               |
  | state    | 筛选学分申请状态。0、1、2、3分别表示未审核、审核通过、修改通过和全部 |
  | year     | 筛选年份                                                     |
  | major    | 筛选专业                                                     |

- 响应参数：

  | 参数名    | 说明                         |
  | --------- | ---------------------------- |
  | total     | 特定筛选条件下学分申请的总数 |
  | applier   | 学分申请的申请人             |
  | checktime | 学分申请的审核时间           |
  | name      | 学分申请的名称               |
  | id        | 学分申请的id                 |
  | state     | 学分申请的状态               |
  | checker   | 学分申请的审核人名称         |

- 响应数据：

  ~~~json
  "data": {
      "total": 1,
      "items": [
          {
              "applier": "王浩",
              "checktime": "1660325542662",
              "name": "创新创业竞赛",
              "id": "166032422274551214108037",
              "state": 2,
              "checker": "teacher"
          }
      ]
  }
  ~~~

  

### 5.1.2 查询特定学分申请信息

- 请求地址：`/getCertainAuthenticationById`

- 接口说明：需要教师角色权限。调用位置为审核-查看。该接口在异议处理-操作处也有调用。

- 请求参数：

  | 参数名 | 说明         |
  | ------ | ------------ |
  | id     | 学分申请的id |

- 响应参数：

  | 参数名 | 说明                                                         |
  | ------ | ------------------------------------------------------------ |
  | item   | 学分申请的详细内容                                           |
  | config | 该学分申请对应的配置规则。此处加载配置规则是为了配合levelstr参数将学分申请的等级、分值等信息完成的展示出来，便于审核 |

  上面的item包含的字段如下：

  | 参数名   | 说明                                                      |
  | -------- | --------------------------------------------------------- |
  | imgurl   | 图片名称，需要结合网站地址使用                            |
  | name     | 学分申请名称                                              |
  | id       | 学分申请id                                                |
  | state    | 学分申请的状态。0表示待审核，1表示审核通过，2表示修改通过 |
  | ruleid   | 学分申请对应的加分规则的id                                |
  | levelstr | 学分申请在加分规则下的等级层级字符串                      |

- 响应数据：

  ~~~json
  // config的内容非常长，不完全贴出
  "data": {
      "item": {
          "imgurl": "166032422274051214108037.jpg",
          "name": "创新创业竞赛",
          "id": "166032422274551214108037",
          "state": 2,
          "ruleid": "eda759ad-d336-4a96-b5bf-fb448456302d",
          "levelstr": "{\"0\":\"eda759ad-d336-4a96-b5bf-fb448456302d\",\"1\":\"4a346155-75c0-4bea-9466-947b0e21b7be\",\"2\":\"18173958-5dfc-4072-9ca3-24c27412307d\"}"
      },
      "config": "{\"uuid\"}"
  }
  ~~~



### 5.1.3 通过学分申请

- 请求地址：`/checkAuthenticationPass`

- 接口说明：需要教师角色权限。调用位置为审核-查看-审核/修改通过。

- 请求参数：

  | 参数名   | 说明                                                         |
  | -------- | ------------------------------------------------------------ |
  | id       | 学分申请id                                                   |
  | name     | 学分申请名称                                                 |
  | score    | 学分申请分值                                                 |
  | isModify | 学分申请是否被修改。0表示没有修改直接通过审核，1表示修改后再通过审核。 |
  | ruleid   | 学分申请对应的加分规则                                       |
  | levelstr | 学分申请在对应的加分规则下的等级配置字符串                   |

- 响应参数：无

- 响应数据：无



### 5.1.4 驳回/删除学分申请

- 请求地址：`/checkAuthenticationNotPass`

- 接口说明：需要教师角色权限。调用位置为审核-查看-审核不通过、学生评价-操作-管理学分-操作-删除、学生管理-操作-管理该生学分-操作-删除。

- 请求参数：

  | 参数名  | 说明                   |
  | ------- | ---------------------- |
  | id      | 学分申请的id           |
  | content | 教师驳回学分申请的理由 |

- 响应参数：无

- 响应数据：无



## 5.2 学生评价
### 5.2.1 查询综评数据列表

- 请求地址：`/getAllStudentScore`

- 接口说明：教师端会用到这个接口。调用位置：学生评价。该接口需要教师角色权限。

- 请求参数：

  | 参数名 | 说明           |
  | ------ | -------------- |
  | year   | 查询对应的年份 |
  | major  | 查询对应的专业 |

- 响应参数：

  | 参数名      | 说明                          |
  | ----------- | ----------------------------- |
  | score_plus  | 手动加分分值                  |
  | score_main  | 学业成绩                      |
  | name        | 学生名字                      |
  | score_sub   | 手动扣分分值                  |
  | rank        | 专业排名                      |
  | score_other | 其他加分                      |
  | id          | 学生id                        |
  | score_final | 综测总分，即学业成绩+其他成绩 |

- 响应数据：

  ~~~json
  "data": [
      {
          "score_plus": 4.5,
          "score_main": 17.2933,
          "name": "王浩",
          "score_sub": 1.0,
          "rank": 1.0,
          "score_other": 60.0,
          "id": "51214108037",
          "score_final": 80.7933
      }
  ]
  ~~~



### 5.2.2 查询手动操作分列表

- 请求地址：`/getScoreManually`

- 接口说明：该接口学生端和教师均可调用，需要学生和教师角色权限。该接口不止此处调用。该接口教师端调用位置为学生评价-操作-管理加分扣分。

- 请求参数：

  | 参数名 | 说明                   |
  | ------ | ---------------------- |
  | userid | 需要查询的学生的id     |
  | year   | 手动操作分数对应的年份 |

- 响应参数：

  | 参数名 | 说明                         |
  | ------ | ---------------------------- |
  | stu_id | 学生id                       |
  | uid    | 手动操作分数项目的id         |
  | score  | 操作分数数值                 |
  | year   | 操作的年份                   |
  | type   | 操作的类型。0是扣分，1是加分 |
  | desc   | 操作相关描述                 |

- 响应数据：

  ~~~json
  "data": [
      {
          "stu_id": "51214108037",
          "uid": "8b7c6bea-c8db-4bd1-bae9-97799dcf3f71",
          "score": 4.5,
          "year": "2022-2023",
          "type": 1,
          "desc": "为学部做出突出贡献"
      },
      {
          "stu_id": "51214108037",
          "uid": "c6e7571b-8c3e-49f3-9c1c-4a0a172e82a8",
          "score": 1.0,
          "year": "2022-2023",
          "type": 0,
          "desc": "早退操作3次"
      }
  ]
  ~~~



### 5.2.3 删除手动操作分

- 请求地址：`/deleteScoreManually`

- 接口说明：需要教师角色权限。调用位置为学生评价-操作-管理加分扣分-编辑-删除该项。

- 请求参数：

  | 参数名 | 说明               |
  | ------ | ------------------ |
  | uid    | 需要操作的项目的id |

- 响应参数：无
- 响应数据：无



### 5.2.4 编辑手动操作分

- 请求地址：`/modifyScoreManuallyInfo`

- 接口说明：需要教师角色权限。调用位置为学生评价-操作-管理加分扣分-编辑-编辑。

- 请求参数：

  | 参数名 | 说明                                     |
  | ------ | ---------------------------------------- |
  | uid    | 操作项目的id                             |
  | score  | 操作项目的分数数值                       |
  | type   | 操作项目的类型。可修改为0，扣分；1，加分 |
  | desc   | 操作项目的具体描述                       |

- 响应参数：无

- 响应数据：无



### 5.2.5 上传学生成绩

- 请求地址：`/readXLSFiles`

- 接口说明：需要教师角色权限。接口调用位置为学生评价-上传学业成绩。上传文件内数据需要严格参照模板文件grade_example.xls中数据的编排格式。该模板文件可以在学生评价-下载学业成绩模板中下载到。

- 请求参数：

  | 参数名 | 数据类型 | 说明                                                         |
  | ------ | -------- | ------------------------------------------------------------ |
  | file   | binary   | 需要上传格式为.xls或.xlsx的文件。文件内数据需要按照一定的格式排列。具体可以参照grade_example.xls模板文件 |

- 响应参数：无

- 响应数据：无



### 5.2.6 新增手动操作分

- 请求地址：`/modifyScoreManually`

- 接口说明：需要教师角色权限。调用位置为学生评价-操作-手动加分扣分

- 请求参数：

  | 参数名 | 说明                             |
  | ------ | -------------------------------- |
  | id     | 需要添加手动操作分的学生的账号id |
  | year   | 操作分所属的年份                 |
  | type   | 操作分类型。0表示扣分，1表示加分 |
  | score  | 操作分分值                       |
  | desc   | 操作分描述，长度                 |

- 响应参数：无

- 响应数据：无



### 5.2.7 导出学生评价结果

- 请求地址：`/getEvaluateResult`

- 接口说明：需要教师角色权限。调用位置为学生评价-导出本页内容。

- 请求参数：

  | 参数名 | 说明               |
  | ------ | ------------------ |
  | year   | 筛选导出内容的年份 |
  | major  | 筛选导出内容的专业 |

- 响应参数：

  | 参数名 | 说明                                 |
  | ------ | ------------------------------------ |
  |        | 导出文件的名称，需要结合资源地址使用 |

- 响应数据：

  ~~~json
  data: "5f8bed1b-63a1-4e5d-8937-fe5454c56cb3.xls"
  ~~~




### 5.2.8 撤回尚未审核的异议

- 请求地址：`/recallAgainst`

- 接口说明：需要学生角色权限。调用位置为学分评价-异议操作-撤回异议申请。

- 请求参数：

  | 参数名 | 说明                   |
  | ------ | ---------------------- |
  | id     | 需要撤回的异议申请的id |

- 相应参数：无

- 响应数据：无



## 5.3 赛事管理

### 5.3.1 查询加分规则列表（简单信息）

- 请求地址：`/getRule`

- 接口说明：需要学生和教师角色权限。与`getContestCOnfig`不同，该接口只获取简单的信息。教师端调用位置为赛事管理-增加赛事，作用是为赛事绑定加分规则，不需要获取详细的配置数据；学生端调用位置为学分管理-学分申请-其他，作用是先让学生选择加分规则，再选择性的加载某个规则的配置数据。

- 请求参数：无

- 响应参数：

  | 参数名 | 说明         |
  | ------ | ------------ |
  | name   | 加分规则名称 |
  | uuid   | 加分规则id   |

- 响应数据：

  ~~~json
  "data": [
      {
          "name": "常见的专业赛事",
          "uuid": "2b16b88f-83aa-4d06-98ad-e19a08a83c2a"
      },
      {
          "name": "国家英语、计算机等级考试",
          "uuid": "8435872c-7869-4c52-9b85-ffac6f7e7c90"
      }
  ]
  ~~~




### 5.3.2 添加赛事

- 请求地址：`/addContestOfManager`

- 接口说明：需要教师角色权限。调用地址为赛事管理-添加赛事。

- 请求参数：

  | 参数名 | 说明                   |
  | ------ | ---------------------- |
  | name   | 赛事的名称             |
  | desc   | 赛事的描述             |
  | rule   | 赛事对应的加分规则的id |

- 响应参数：无

- 响应数据：无



### 5.3.3 查询赛事列表

- 请求地址：`/getAllContest`

- 接口说明：需要教师角色权限。调用位置为赛事管理。

- 请求参数：无

- 响应参数：

  | 参数名 | 说明         |
  | ------ | ------------ |
  | total  | 赛事列表总数 |
  | items  | 赛事列表     |

  上面的赛事列表items有以下参数：

  | 参数名 | 说明       |
  | ------ | ---------- |
  | id     | 赛事的id   |
  | title  | 赛事的名称 |

- 响应数据：

  ~~~json
  "data": {
      "total": 3,
      "items": [
          {
              "id": "1660272616366",
              "title": "计算机设计大赛"
          },
          {
              "id": "1660133894341",
              "title": "互联网+"
          },
          {
              "id": "1660125593945",
              "title": "三创赛"
          }
      ]
  }
  ~~~

  

### 5.3.4 删除赛事

- 请求地址：`/deleteContest`

- 接口说明：需要教师角色权限。调用位置为赛事管理-操作-删除该赛事。

- 请求参数：

  | 参数名 | 说明   |
  | ------ | ------ |
  | id     | 赛事id |

- 响应参数：无

- 响应数据：无



### 5.3.5 编辑赛事

- 请求地址：`/checkContestPassed`

- 接口说明：需要教师角色权限。调用位置为赛事管理-操作-编辑该赛事。

- 请求参数：

  | 参数名  | 说明                   |
  | ------- | ---------------------- |
  | title   | 修改后的赛事名称       |
  | content | 修改后的赛事描述       |
  | ruleid  | 修改后的赛事对应的规则 |
  | id      | 赛事id                 |

- 响应参数：无

- 响应数据：无



### 5.3.6 查询赛事信息

- 请求地址：`/getContestDetailById`

- 接口说明：需要教师角色权限。调用位置为赛事管理-操作-编辑。

- 请求参数：

  | 参数名 | 说明   |
  | ------ | ------ |
  | id     | 赛事id |

- 响应参数：

  | 参数名  | 说明                     |
  | ------- | ------------------------ |
  | id      | 赛事id                   |
  | title   | 赛事名称，限50字         |
  | ruleid  | 赛事对应的加分规则       |
  | content | 赛事的描述信息，限1000字 |

- 响应数据：

  ~~~json
  "data": {
      "id": "1660272616366",
      "title": "计算机设计大赛改名",
      "ruleid": "fec4b330-c078-4e12-bcfd-d72dc72e72b7",
      "content": "每两年一次，官网地址"
  }
  ~~~

  



## 5.4 学生管理

### 5.4.2 查询学生学分申请

- 请求地址： `/getStudentAuthenticationsById`

- 接口说明：调用位置：学生管理-操作-管理该生学分。该接口需要教师角色权限。

- 请求参数：

  | 参数   | 说明   |
  | ------ | ------ |
  | userid | 学生id |

- 响应参数：

  | 参数  | 说明                   |
  | ----- | ---------------------- |
  | name  | 学分申请对应的项目名称 |
  | id    | 学分申请id             |
  | state | 学分申请的状态         |

- 响应数据：

  ~~~json
  "data": [
      {
          "name": "创新创业竞赛",
          "id": "166032422274551214108037",
          "state": 2
      }
  ]
  ~~~



### 5.4.3 查询专业列表

- 请求参数：`/getAllClasses`、`/getMajors`

- 接口说明：两个接口的作用都是一样的。该接口在很多地方都会用到。该接口需要教师角色权限。

- 请求参数：无

- 响应参数：

  | 参数名     | 说明       |
  | ---------- | ---------- |
  | major_code | 专业代码   |
  | major_name | 专业名称   |
  | uuid       | 专业的uuid |

- 响应数据：

  ~~~json
  "data": [
      {
          "major_code": "040104",
          "major_name": "教育技术学",
          "uuid": "d606a998-b445-4799-9976-f7985cc03fb1"
      }
  ]
  ~~~



### 5.4.4 上传学生列表

- 请求地址：`/addStudents`

- 接口说明：需要教师角色权限。调用位置为学生管理-上传学生名单

- 请求参数：

  | 参数名 | 类型   | 说明                                                         |
  | ------ | ------ | ------------------------------------------------------------ |
  | file   | binary | 学生名单文件，文件类型要求.xls或.xlsx。文件内数据格式需要与模板文件student_example.xls内数据格式一致。模板文件可以在学生管理-下载学生名单模板下载。 |

- 响应参数：无

- 响应数据：无



### 5.4.5 重置学生账号密码

- 请求地址：`/resetPassword`

- 接口说明：需要教师角色权限。调用位置为学生管理-操作-重置为随机密码

- 请求参数：

  | 参数名 | 说明                 |
  | ------ | -------------------- |
  | id     | 需要重置密码的学生id |

- 响应参数：

  | 参数名 | 说明             |
  | ------ | ---------------- |
  |        | 重置后的随机密码 |

- 响应数据：

  ~~~json
  "data": "nVtuaM"
  ~~~



### 5.4.6 查询学生列表

- 请求地址：`/getAllStudentList`

- 接口说明：需要教师角色权限。调用位置为学生管理。

- 请求参数：

  | 参数名   | 说明                 |
  | -------- | -------------------- |
  | major    | 查询的学生所属的专业 |
  | curPage  | 当前查询的页数       |
  | pageSize | 一页查询的书名       |

- 响应参数：

  | 参数名 | 说明                          |
  | ------ | ----------------------------- |
  | role   | 学生所属角色，一般均为student |
  | name   | 学生名称                      |
  | userid | 学生账号id                    |
  | class  | 学生所在班级                  |

- 响应数据：

  ~~~json
  "data": {
      "item": [
          {
              "role": "student",
              "name": "王浩",
              "userid": "51214108037",
              "class": "1"
          }
      ],
      "total": 1
  }
  ~~~



### 5.4.7 查询特定学分申请信息

- 请求地址：`/getCertainAuthenticationByIdWithScore`

- 接口说明：需要教师角色权限。调用位置为学生管理-操作-管理该生学分-操作-编辑。该接口与`/getCertainAuthenticationById`接口不用的地方在于：`/getCertainAuthenticationById`是审核前获取的学分申请信息，作用是根据该项学分申请对应的规则将学分申请的信息完成的展示出来，便于教师审核；而`getCertainAuthenticationByIdWithScore`是在学分申请通过审核后，将学分申请的基本信息连同加分分值一起查询出来。

- 请求参数：

  | 参数名 | 说明         |
  | ------ | ------------ |
  | id     | 学分申请的id |

- 响应参数：

  | 参数名 | 说明                                           |
  | ------ | ---------------------------------------------- |
  | name   | 学分申请的项目名称                             |
  | id     | 学分申请的id                                   |
  | state  | 学分申请的状态。1，2分别表示审核通过和修改通过 |

- 响应数据：

  ~~~json
  "data": [
      {
          "name": "创新创业竞赛",
          "id": "166032422274551214108037",
          "state": 2
      }
  ]
  ~~~



### 5.4.8 修改已审核学分申请信息

- 请求地址：`/checkAuthenticationPassModify`

- 接口说明：需要教师角色权限。调用位置为学生管理-操作-管理该生学分-操作-编辑-确认修改。

- 请求参数：

  | 参数名   | 说明                   |
  | -------- | ---------------------- |
  | id       | 修改的学分申请的id     |
  | name     | 修改后的学分申请名称   |
  | score    | 修改后的学分申请的分值 |
  | isModify | 修改后                 |
  | ruleid   |                        |
  | levelstr |                        |

  

- 响应参数：无

- 响应数据：无



## 5.5 配置

### 5.5.1 查询加分规则列表

- 请求地址：`/getContestConfig`

- 接口说明：该接口学生和教师均可调用。学生端调用位置为学分管理-学分申请；教师端调用位置为规则配置-配置加分规则。该接口需要学生或教师角色权限。

- 请求参数：无

- 响应参数：

  | 参数        | 说明                                                         |
  | ----------- | ------------------------------------------------------------ |
  | classconfig | 某一项加分规则的具体配置，以字符串形式存储，由客户端解析为json |
  | name        | 加分规则名称                                                 |
  | indexId     | 加分规则所属的指标的id                                       |
  | uuid        | 加分规则的uuid                                               |

- 响应数据：

  ~~~json
  "data": {
      "classconfig": "{\"uuid\":\"2b16b88f-83aa-4d06-98ad-e19a08a83c2a\",\"name\":\"常见专业赛事\",\"children\":[{\"uuid\":\"e459e833-4094-4977-b721-d7379cfe8978\",\"name\":\"个人\",\"tag\":\"normal\",\"children\":[{\"uuid\":\"42e7fbef-fad9-4a0d-b5d7-40c46897362d\",\"name\":\"国家级\",\"tag\":\"normal\",\"children\":[{\"uuid\":\"c98f82c4-c921-44e2-b5b1-f4654dcce3c7\",\"name\":\"一等奖\",\"tag\":\"root\",\"score\":\"40\",\"children\":null},{\"uuid\":\"3b5d9840-9ab7-445c-8c19-1530ca6ebb80\",\"name\":\"二等奖\",\"tag\":\"root\",\"score\":\"30\",\"children\":null},{\"uuid\":\"9111d87c-e4a0-47c8-9e43-cb837e865bda\",\"name\":\"三等奖\",\"tag\":\"root\",\"score\":\"20\",\"children\":null}]},{\"uuid\":\"cdbc910b-6572-4de2-b8ec-c7111fea607a\",\"name\":\"省级\",\"tag\":\"normal\",\"children\":[{\"uuid\":\"62efa71a-39b9-4655-a928-42b0fc56f4f7\",\"name\":\"一等奖\",\"tag\":\"root\",\"score\":\"20\",\"children\":null},{\"uuid\":\"a16952c4-8dfe-498e-b5e5-584306c9cae4\",\"name\":\"二等奖\",\"tag\":\"root\",\"score\":\"15\",\"children\":null},{\"uuid\":\"bfa4279f-78b3-4ad2-b8a1-ffa573df3baa\",\"name\":\"三等奖\",\"tag\":\"root\",\"score\":\"10\",\"children\":null}]},{\"uuid\":\"ced542fc-878e-410d-8f08-c6404eca16d2\",\"name\":\"校级\",\"tag\":\"normal\",\"children\":[{\"uuid\":\"39853771-92fc-4ce0-80b0-6aa137ac1808\",\"name\":\"一等奖\",\"tag\":\"root\",\"score\":\"10\",\"children\":null},{\"uuid\":\"9508e584-5b96-4161-8bed-6b7069ae5de8\",\"name\":\"二等奖\",\"tag\":\"root\",\"score\":\"7.5\",\"children\":null},{\"uuid\":\"2ab186ed-ce89-4742-a2b0-0aa051f257bc\",\"name\":\"三等奖\",\"tag\":\"root\",\"score\":\"5\",\"children\":null}]},{\"uuid\":\"4f46f43a-41b8-4ad9-aed5-e4d7e5425ad9\",\"name\":\"校职能部门级\",\"tag\":\"normal\",\"children\":[{\"uuid\":\"265cc2b5-605e-4086-a79e-04972552ab0e\",\"name\":\"一等奖\",\"tag\":\"root\",\"score\":\"6\",\"children\":null},{\"uuid\":\"d94f51c7-e5ea-4fa1-a825-5f7492af89ed\",\"name\":\"二等奖\",\"tag\":\"root\",\"score\":\"4\",\"children\":null},{\"uuid\":\"e309fdce-c479-4f3e-a926-f3c592664b36\",\"name\":\"三等奖\",\"tag\":\"root\",\"score\":\"2\",\"children\":null}]},{\"uuid\":\"eb9b432e-f5a5-4cdb-8988-44c76535439f\",\"name\":\"学部级\",\"tag\":\"normal\",\"children\":[{\"uuid\":\"7e272678-918c-4c4a-80b8-f5459ed46bb3\",\"name\":\"一等奖\",\"tag\":\"root\",\"score\":\"5\",\"children\":null},{\"uuid\":\"77910633-f838-4352-a9a1-cd9654696af7\",\"name\":\"二等奖\",\"tag\":\"root\",\"score\":\"3\",\"children\":null},{\"uuid\":\"c9490884-9e06-4200-bfc6-3c3fcd990023\",\"name\":\"三等奖\",\"tag\":\"root\",\"score\":\"1.5\",\"children\":null}]}]},{\"uuid\":\"adb26faf-637a-4379-b790-54f0ec3e6a0a\",\"name\":\"集体\",\"tag\":\"normal\",\"children\":[{\"uuid\":\"de0a5c54-00b3-4c47-8d8a-d9f9fcc5a972\",\"name\":\"国家级\",\"tag\":\"normal\",\"children\":[{\"uuid\":\"0c5e691b-ecd0-4994-8b6b-9d3259c4eeab\",\"name\":\"一等奖\",\"tag\":\"root\",\"score\":\"20\",\"children\":null},{\"uuid\":\"b4c6f4b2-66c3-43c7-acbd-2ce1918ffb92\",\"name\":\"二等奖\",\"tag\":\"root\",\"score\":\"15\",\"children\":null},{\"uuid\":\"d4357c59-aa90-46dd-8ea1-686cdce0cf66\",\"name\":\"三等奖\",\"tag\":\"root\",\"score\":\"10\",\"children\":null},{\"uuid\":\"3b01e6cd-c01b-4d4c-ace8-19209b54ae97\",\"name\":\"优秀奖\",\"tag\":\"root\",\"score\":\"5\",\"children\":null}]},{\"uuid\":\"bf6bee49-3d2d-4b30-81de-3869771dc580\",\"name\":\"省级\",\"tag\":\"normal\",\"children\":[{\"uuid\":\"42eaa05e-f51c-4ca8-bdaf-f261f19bb4db\",\"name\":\"一等奖\",\"tag\":\"root\",\"score\":\"10\",\"children\":null},{\"uuid\":\"934c05ba-6a89-48da-b7ef-64aaddbc1307\",\"name\":\"二等奖\",\"tag\":\"root\",\"score\":\"8\",\"children\":null},{\"uuid\":\"1092abb2-e0a7-4ad1-9cbc-6ef47a1d79f4\",\"name\":\"三等奖\",\"tag\":\"root\",\"score\":\"5\",\"children\":null},{\"uuid\":\"bab88ff2-bc7d-4b40-9877-08c669e6e9c4\",\"name\":\"优秀奖\",\"tag\":\"root\",\"score\":\"2\",\"children\":null}]},{\"uuid\":\"1faa89b6-2909-4d40-9f12-643fd7ba1ee0\",\"name\":\"校级\",\"tag\":\"normal\",\"children\":[{\"uuid\":\"6539c156-4cb9-48d6-89ae-64e13165a578\",\"name\":\"一等奖\",\"tag\":\"root\",\"score\":\"6\",\"children\":null},{\"uuid\":\"3b4d76d0-c7cd-4e06-8070-88f08fe55030\",\"name\":\"二等奖\",\"tag\":\"root\",\"score\":\"4\",\"children\":null},{\"uuid\":\"7cb64068-3aae-4823-aa6f-c3b6f6cbeacd\",\"name\":\"三等奖\",\"tag\":\"root\",\"score\":\"2\",\"children\":null}]},{\"uuid\":\"970044ac-4610-457d-8f78-004c40619b7e\",\"name\":\"校职能部门级\",\"tag\":\"normal\",\"children\":[{\"uuid\":\"ce8b5deb-0fab-4b3e-a924-0b2565db95d9\",\"name\":\"一等奖\",\"tag\":\"root\",\"score\":\"3\",\"children\":null},{\"uuid\":\"b4782ca1-074e-4aa9-bd55-2204ef8b44bf\",\"name\":\"二等奖\",\"tag\":\"root\",\"score\":\"2\",\"children\":null},{\"uuid\":\"b93fe000-9747-4bf3-8884-e0dbd619713c\",\"name\":\"三等奖\",\"tag\":\"root\",\"score\":\"1\",\"children\":null}]},{\"uuid\":\"dd893279-d5c6-42d5-bf76-bcc4bf069383\",\"name\":\"学部级\",\"tag\":\"normal\",\"children\":[{\"uuid\":\"be83dcbe-b69f-438f-96ac-2765745463c1\",\"name\":\"一等奖\",\"tag\":\"root\",\"score\":\"2\",\"children\":null},{\"uuid\":\"d4554faa-3a1f-41d9-a466-709eca612612\",\"name\":\"二等奖\",\"tag\":\"root\",\"score\":\"1\",\"children\":null},{\"uuid\":\"2125109e-cd49-47ee-a689-6b68566dd093\",\"name\":\"三等奖\",\"tag\":\"root\",\"score\":\"0.5\",\"children\":null}]}]}],\"tag\":\"top\",\"indexid\":\"ad3bf162-8b5e-4d8a-bc89-aefb6255dc27\"}",
      "name": "常见专业赛事",
      "indexid": "ad3bf162-8b5e-4d8a-bc89-aefb6255dc27",
      "uuid": "2b16b88f-83aa-4d06-98ad-e19a08a83c2a"
  },
  ~~~



### 5.5.2 修改加分规则

- 请求地址：`/modifyContestConfig`

- 接口说明：需要教师角色权限。在修改规则时，后端会首先备份当前规则，然后再更新，防止因为数据库存取错误导致的问题。

- 请求参数：

  | 参数 | 说明                       |
  | ---- | -------------------------- |
  | map  | 该参数包含了三个部分的内容 |

  map由三个部分的内容组成，包括name，indexId和具体的规则列表：

  | 参数     | 说明                                                         |
  | -------- | ------------------------------------------------------------ |
  | name     | 规则名称列表。由于修改规则可能是修改的名称，因此该参数存储了每一个加分规则的名称 |
  | index    | 指标id列表。由于修改规则可能是修改规则对应的指标，因此该参数存储了每一个加分规则对应的指标的id |
  | 多个uuid | 修改后的每一条规则。有多少条规则，这个字段就有多少个         |

- 响应参数：无

- 响应数据：无

  

### 5.5.3 查询学业成绩权重

- 请求地址：`/getGradePercent`

- 接口说明：需要教师角色权限。调用位置为规则配置-修改学业成绩比例。

- 请求参数：无

- 响应参数：一个数值，该数值即为学业成绩在综合素质评价中的权重。

- 响应数据：

  ~~~json
  "data": 0.2
  ~~~



### 5.5.4 修改学业成绩权重

- 请求地址：`/modifyGradePercent`

- 接口说明：需要教师角色权限。调用位置为规则配置-修改学业成绩比例。

- 请求参数：

  | 参数名  | 说明                     |
  | ------- | ------------------------ |
  | percent | 修改后的学业成绩权重数值 |

- 响应参数：无

- 响应数据：无



### 5.5.5 查询评价指标列表

- 请求地址：`/getIndexs`

- 接口说明：需要教师角色权限。调用位置为规则配置-评价指标配置。

- 请求参数：无

- 响应参数

  | 参数名 | 说明     |
  | ------ | -------- |
  | name   | 指标名称 |
  | uuid   | 指标id   |

- 响应数据

  ~~~json
  "data": [
      {
          "name": "专业比赛",
          "uuid": "ad3bf162-8b5e-4d8a-bc89-aefb6255dc27"
      },
      {
          "name": "社会实践",
          "uuid": "7845792b-a68a-4f5a-9f07-5c1465c0860d"
      },
      {
          "name": "其他赛事",
          "uuid": "474a1643-d66c-4759-abbb-844cd58471d0"
      }
  ]
  ~~~



### 5.5.6 增加评价指标

- 请求地址：`/addIndex`

- 接口说明：需要教师角色权限。调用位置为规则配置-评价指标配置。

- 请求参数：

  | 参数名 | 说明     |
  | ------ | -------- |
  | uuid   | 指标id   |
  | name   | 指标名称 |

- 响应参数：无

- 响应数据：无



### 5.5.7 删除评价指标

- 请求地址：`/deleteIndex`

- 接口说明：需需要教师角色权限。调用位置为规则配置-评价指标配置。

- 请求参数：

  | 参数名 | 说明               |
  | ------ | ------------------ |
  | uuid   | 需要删除的指标的id |

- 响应参数：无

- 响应数据：无



### 5.5.8 增加专业

- 请求地址：`/addMajor`

- 接口说明：需要教师角色权限。调用位置为规则配置-配置专业列表

- 请求参数

  | 参数名 | 说明     |
  | ------ | -------- |
  | name   | 专业名称 |
  | code   | 专业代码 |
  | uuid   | 专业id   |

- 响应参数：无

- 响应数据：无



### 5.5.9 编辑专业信息

- 请求地址：`/modifyMajor`

- 接口说明：需要教师角色权限。调用位置为规则配置-配置专业列表

- 请求参数：

  | 参数名 | 说明               |
  | ------ | ------------------ |
  | uuid   | 需要修改的专业的id |
  | name   | 对应专业的名称     |
  | code   | 对应专业的代码     |

- 响应参数：无

- 响应数据：无



### 5.5.10 删除专业

- 请求地址：`/deleteMajor`

- 接口说明：需要教师角色权限。调用位置为规则配置-配置专业列表

- 请求参数：

  | 参数名 | 说明               |
  | ------ | ------------------ |
  | uuid   | 需要删除的专业的id |

- 响应参数：无

- 响应数据：无



### 5.5.11 导出配置

- 请求地址：`/exportConfig`

- 接口说明：需要教师角色权限。调用位置为规则配置-导出配置

- 请求参数：

  | 参数名    | 说明                                               |
  | --------- | -------------------------------------------------- |
  | indicator | 是否勾选了导出评价指标。0表示没有勾选，1表示勾选。 |
  | rule      | 是否勾选了导出加分规则。0表示没有勾选，1表示勾选。 |
  | major     | 是否勾选了导出专业列表。0表示没有勾选，1表示勾选。 |

- 响应参数：

  | 参数名    | 说明                                                 |
  | --------- | ---------------------------------------------------- |
  | indicator | 导出的评价指标配置文件的地址。需要结合基础地址使用。 |
  | major     | 导出的专业列表配置文件的地址。需要结合基础地址使用。 |
  | rule      | 导出的加分规则配置文件的地址。需要结合基础地址使用。 |

- 响应数据：

  ~~~json
  "data": {
      "indicator": "a28ebc7c-3c8a-4c65-97eb-c1c80198aedd.xls",
      "major": "fcb7a24b-4667-4114-a265-7d05a7047b3c.xls",
      "rule": "c7ffba49-3e57-4d98-8b6a-ca590d83286b.xls"
  }
  ~~~



## 5.6 分析

### 5.6.1 图表分析

- 请求地址：`/getIndexData`

- 接口说明：需要教师角色权限。调用位置为分析。

- 请求参数：

  | 参数名 | 说明                 |
  | ------ | -------------------- |
  | year   | 需要分析的数据的年份 |
  | code   | 需要分析的专业的代码 |

- 响应参数：

  | 参数名 | 说明                 |
  | ------ | -------------------- |
  | count  | 指标下学分申请的数量 |
  | name   | 指标名称             |
  | uuid   | 指标id               |

- 响应数据：

  ~~~json
  "data": [
      {
          "count": 1,
          "name": "专业比赛",
          "uuid": "ad3bf162-8b5e-4d8a-bc89-aefb6255dc27"
      }
  ]
  ~~~



## 5.7 异议处理

### 5.7.1 查询学分申请异议列表

- 请求地址：`/getAgainstList`

- 接口说明：需要教师角色权限。调用位置为异议处理。

- 请求参数：

  | 参数名   | 说明                                          |
  | -------- | --------------------------------------------- |
  | curPage  | 分页查询的当前页数                            |
  | pageSize | 分页查询的一页的数量                          |
  | action   | 异议的类型。1，2，3分别表示待处理、通过和驳回 |

- 响应参数：

  | 参数名 | 说明                     |
  | ------ | ------------------------ |
  | total  | 当前筛选条件下的数据总数 |
  | list   | 异议申请列表             |

  上面的list包含的参数如下：

  | 参数名 | 说明                                                      |
  | ------ | --------------------------------------------------------- |
  | desca  | 学生申请异议的理由                                        |
  | descb  | 教师驳回申请异议的理由                                    |
  | name   | 提出学分申请异议的学生的名字                              |
  | action | 当前学分申请的状态。1，2，3分别表示待审核、审核通过和驳回 |
  | id     | 当前学分申请的id                                          |

- 响应数据：

  ~~~json
  "data": {
      "total": 1,
      "list": [
          {
              "desca": "多加了10分",
              "descb": "测试",
              "name": "王浩",
              "action": 3,
              "id": "166032422274551214108037"
          }
      ]
  }
  ~~~

  

### 5.7.2 驳回学分申请异议

- 请求地址：`/modifyAgainstDismiss`

- 接口说明：需要教师角色权限。调用位置为异议处理-操作-直接驳回。

- 请求参数：

  | 参数名 | 说明                                             |
  | ------ | ------------------------------------------------ |
  | id     | 学分申请的id                                     |
  | descb  | 驳回的理由                                       |
  | name   | 学分申请的项目名称，该参数在为学生发送通知时用到 |

- 响应参数：无

- 响应数据：无



### 5.7.3 通过学分申请异议

- 请求地址：`/modifyAgainstPass`

- 接口说明：需要教师角色权限。调用位置为异议处理-操作-修改并通过。

- 请求参数：

  | 参数名   | 说明                                 |
  | -------- | ------------------------------------ |
  | id       | 学分申请id                           |
  | name     | 学分申请的项目名称                   |
  | score    | 学分申请的分值                       |
  | ruleid   | 学分申请对应的加分规则id             |
  | levelstr | 学分申请对应的加分规则下的等级字符串 |

- 响应参数：无

- 响应数据：无

# 6 资料页

## 6.1 查询未读通知列表

- 请求地址：`/getUnreadNotifyCount`

- 接口说明：需要学生或教师角色权限

- 请求参数：无

- 响应参数：

  | 参数名      | 说明         |
  | ----------- | ------------ |
  | unReadCount | 未读通知数量 |

- 响应数据：

  ~~~json
  "data": {
      "unReadCount": 0
  }
  ~~~



## 6.2 修改密码

- 请求地址：`/modifyPassword`

- 接口说明：调用位置为个人中心-系统信息-修改密码

- 请求参数：

  | 参数名   | 说明         |
  | -------- | ------------ |
  | password | 修改后的密码 |

- 响应参数：无

- 响应数据：



## 6.3 查询个人资料

- 请求地址：`/getUserBasicInfo`

- 接口说明：教师用户和学生用户调用该接口时会返回不同的结果

- 请求参数：无

- 响应参数：

  1. 教师端

     | 参数名 | 说明         |
     | ------ | ------------ |
     | role   | 用户所属角色 |
     | userid | 用户id       |

  2. 学生端

     | 参数名     | 说明             |
     | ---------- | ---------------- |
     | name       | 学生姓名         |
     | major_name | 学生所在专业名称 |
     | userid     | 学生用户id       |
     | class      | 学生所在班级     |

- 响应数据：

  1. 教师端

     ~~~json
     "data": {
         "role": "manager",
         "userid": "0123456"
     }
     ~~~

  2. 学生端

     ~~~json
     "data": {
         "name": "王浩",
         "major_name": "教育技术学",
         "userid": "51214108037",
         "class": "1"
     }
     ~~~

